//Alessandro Gentilin
//12/05/2023 - Vicenza - Italy
//Open-source-synthetic-photoplethysmographic-signal-generator-with-analog-output
//After generating the synthetic photoplethysmographic signal, copy-paste it into the following script. Deploy the script into Arduino Uno. Use an RC filter to smooth the signal.
//Make sure the generated signal ranges between 0 and 255

//copy paste the generated signal into the int data variable, within the {}
int data[] = {16.6617335231097,20.6392684640385,25.2504229321311,30.5483729060604,36.5786690362641,43.3759760454995,50.960687457686,59.3355909698185,68.4827901396434,78.3611078568598,88.9042026038931,100.0196168488,111.588946299167,123.46926901158,135.49590616054,147.486505202416,159.246346586386,170.574683857705,181.27184163302,191.146724322239,200.024337799862,207.752902221506,214.210140435132,219.308363915628,222.998044958612,225.269655323643,226.153660543865,225.718676914675,224.067915071298,221.334140501262,217.673468808362,213.2583754338,208.270331729733,202.892480473634,197.302735642313,191.667637602664,186.137221882483,180.841074685536,175.885659097958,171.352909956432,167.300019055848,163.760270678854,160.744743412622,158.244669047927,156.234232414583,154.673605185202,153.512028778882,152.690792692562,152.145990880747,151.810976420987,151.618470408561,151.502312330437,151.398864427837,151.248100958204,150.994424752397,150.587258583525,149.981458610357,149.137592781024,148.022119926133,146.607496633984,144.872230034297,142.800886253343,140.384057224751,137.618283174107,134.505924634431,131.054976284686,127.278815067985,123.195876660051,118.82925707322,114.206239617974,109.357751226782,104.317755925979,99.1225967193749,93.810300079431,88.4198594501252,82.9905155380564,77.5610516566272,72.1691220022544,66.8506295420317,61.6391682810841,56.5655421881628,51.6573701437686,46.9387831005362,42.4302163755388,38.1482967852017,34.1058213264505,30.311821421807,26.7717044747753,23.4874626902711,20.4579378393968,17.679129897095,34.0156439601042,40.4114090756261,47.5551351840799,55.4578929747853,64.1143199161703,73.5002879837685,83.5710102162757,94.2597480575965,105.477269428415,117.112183615172,129.0322435529,141.08666010086,153.109418679144,164.923529304758,176.346080548105,187.193910613083,197.289659136421,206.467925639629,214.581238408272,221.505533434839,227.14485813363,231.435048511057,234.34617951275,235.883653110878,236.087862915361,235.032452468518,232.821261345297,229.584123300828,225.471739164027,220.649890168255,215.29328245643,209.579319609719,203.682087754166,197.766809025579,191.984977003191,186.470336060095,181.33580975469,176.671425760231,172.543230409507,168.993138074107,166.039621782975,163.6791232028,161.888042839603,160.62516464188,159.834371891868,159.447521608166,159.387360571197,159.57038535057,159.909569299925,160.316899606864,160.705685749857,160.992616176223,161.09955218638,160.955056818255,160.495662246289,159.666882369224,158.423978538453,156.732486504941,154.568512333724,151.918804842626,148.780612506956,145.161333999645,141.07797369292,136.556416455679,131.630539728493,126.341184837199,120.735013454756,114.863278666188,108.780542887773,102.543376652825,96.2090727993249,89.8344097721808,83.4744955792402,77.1817205056403,71.0048421706048,64.9882211463873,59.1712194384739,53.5877679601207,48.2661030339085,43.2286662089208,38.492156547357,34.0677202107865,29.9612588063032,26.1738356158869,22.7021575454776,19.539110353562,16.6743253633536,14.0947573001957,11.7852549720233,9.72910905614907,31.4544400627965,36.8888884457002,43.0584617004004,50.0093699206827,57.7761243939307,66.3779245683507,75.8150819099981,86.0656955264815,97.0828168501547,108.792348749409,121.091914995628,133.850907027175,146.91186593966,160.093289945001,173.193874482054,185.998098893987,198.282976833347,209.825695074638,220.411785316161,229.843413504485,237.947337626845,244.582082206939,249.643907765258,253.071215242289,254.847114902931,255,253.602088895872,250.766025621912,246.639747918517,241.399934274277,235.244419607372,228.384017565758,221.034203303809,213.407094290288,205.704121253272,198.109712139569,190.786226003209,183.870278978359,177.470508954962,171.666736603892,166.510404043722,162.026113036443,158.214044553006,155.053021354428,152.503973666994,150.513582495181,149.017902076627,147.945798423487,147.222080755665,146.770243184349,146.514772125988,146.383008269461,146.306578974723,146.222437051995,146.07355496925,145.809330237224,145.385758992592,144.765431830581,143.917399986138,142.816952230006,141.445334388762,139.789435070801,137.841453613671,135.59855987074,133.062550435996,130.239502308313,127.139422738313,123.775892912939,120.165702996247,116.328476620853,112.286283978296,108.063243973736,103.685117307519,99.1788936753928,94.5723774298776,89.8937769420228,85.1713035015119,80.4327858770529,75.7053066333566,71.0148659883365,66.3860784296557,61.8419065373198,57.4034355276696,53.0896909949671,48.9175012303821,44.9014043926327,41.0535997335873,37.3839410840425,33.8999699114578,30.6069844974333,27.5081411656475,24.6045830311489,21.8955914427124,19.3787551485043,17.0501522230763,14.9045399375296,12.9355480177142,11.1358710980462,9.49745661982723,8.01168492111167,6.66953879875658,5.46176037197185,4.37899362186777,3.41191150684953,2.55132704551158,1.7882882060442,1.11415683605871,0.520672203961728,0,27.2281939271893,32.1589268227454,37.6500734271543,43.7162010789918,50.3623315733645,57.5824005803384,65.3578942293221,73.6567482209313,82.4325934490228,91.6244256254282,101.156764536497,110.940351419455,120.873411018776,130.843479062644,140.729767458726,150.406010034416,159.743702947544,168.615627875933,176.899524621193,184.481764505126,191.260868232477,197.150712619891,202.083280076407,206.010822695144,208.907338407626,210.769288438294,211.615521398008,211.486407572448,210.442224938409,208.560873843567,205.935027975231,202.668853437425,198.874444150542,194.668129646238,190.166810515959,185.484467735564,180.728975808831,175.999327553712,171.383352099818,166.9559791302,162.778073448737,158.895836321193,155.3407452145,152.129982707647,149.267289251483,146.744163500442,144.541328134435,142.630378106976,140.975531500082,139.535409850867,138.264784044002,137.116232715223,136.041671702418,134.993724630001,133.926915575137,132.798674458157,131.570154009097,130.206863732192,128.679131205661,126.962404414547,125.037410802835,122.89018958277,120.512013813006,117.899218109582,115.052946819942,111.978836270137,108.68664344549,105.189832295938,101.505127835535,97.65204735854,93.6524174178033,89.5298846770417,85.309428314507,81.0168812720895,76.6784672618005,72.3203600170425,67.9682707747821,63.6470693741151,59.38044364676,55.1906009581158,51.0980148469741,47.1212187301312,43.276647613932,39.5785277211057,36.0388129325225,32.6671659931557,29.4709815701295,26.4554475042459,23.6236399850566,20.9766479172167,18.5137214396106,16.2324394091086,14.1288906621868,12.1978640090433,10.4330421808252,23.7663973473134,28.5414949092582,33.9241089222167,39.939970621581,46.6052205585882,53.9244469277508,61.8888731609534,70.4748033115931,79.6424356854966,89.3351503725972,99.4793641705554,109.985026740186,120.74680513826,131.6459711901,142.552969136626,153.330601776829,163.837734467635,173.933380581231,183.481002083115,192.352837264005,200.434056343767,207.6265460022,213.852136396454,219.0551085123,223.203854476466,226.291606612884,228.336199769736,229.378882536578,229.482242981197,228.727360123351,227.210330547106,225.038347953104,222.32553046219,219.18869538325,215.743274142897,212.099542192352,208.3593117382,204.613201417748,200.938559214952,197.39807574407,194.039087143034,190.893532522138,187.978502038655,185.297289477993,182.840848373383,180.589543254657,178.515087122505,176.582561812275,174.752428353999,172.982448395859,171.229453837806,169.450918691785,167.606303676233,165.65815921866,163.572985690689,161.321860407743,158.880849011086,156.231224348634,153.359519089097,150.25743936941,146.921666187673,143.353569439869,139.558856873917,135.547177175062,131.331693218412,126.928638474242,122.356866803672,117.637403542334,112.793003883269,107.847723134324,102.826502399684,97.7547725557226,92.6580789805196,87.561729273192,82.4904660865769,77.4681671269879,72.5175742929405,67.6600537904919,62.9153888505367,58.3016063711921,53.8348384166387,49.52921903264,45.3968163061931,41.44759902506,37.6894367077036,34.1281312012985,30.7674775097038,27.6093510365486,24.6538180290955,21.8992657000836,19.3425482962093,16.9791452773197,14.8033277691237,12.8083295493626,10.9865190143913,26.7160618233635,31.8700760810126,37.7240286040957,44.3160463101531,51.6722032223211,59.803309598726,68.7018189792637,78.3390487761304,88.6629238464983,99.5964529325331,111.037132686785,122.857442068908,134.906541437269,147.01322746328,158.990120454584,170.63897961969,181.756960202014,192.143550864501,201.607866876775,209.975930598681,217.0975502696,222.852414196372,227.155050872696,229.958364758413,231.255538469384,231.080189031938,229.504771208384,226.63732648047,222.616773859715,217.607020830795,211.790233457031,205.359640024355,198.512250930599,191.441859581094,184.332647768308,177.353659130831,170.654331785886,164.361202685524,158.57581817373,153.373813473947,148.805063131278,144.894758033852,141.645234212933,139.038364282448,137.038322862947,135.594550303972,134.644761421555,134.117874424907,133.936766370628,134.020792341018,134.288033639682,134.657263867899,135.049639758846,135.390135774537,135.608747988336,135.641494429797,135.431236917637,134.928344666636,134.091213854786,132.886651004066,131.29012239748,129.285867518825,126.86687208715,124.034695832265,120.799151655298,117.177835982798,113.195514557826,108.883373134751,104.278148040441,99.4211568313533,94.3572538648545,89.1337391478732,83.7992510633172,78.4026743536303,72.9920940235082,67.6138236778799,62.3115333961495,57.1254977916566,52.0919796996332,47.242759288986,42.6048126197609,38.2001380706077,34.0457239074916,30.153645778056,26.5312792612921,23.181609884642,20.1036212845133,17.2927414182571,14.7413268724253,12.4391662489248,10.3739852127356,8.53193789850912,6.89807183741355,5.45675622145256,4.19206602284924,3.08811710179135,2.12934986050383,1.30076115433022,29.3342444022964,34.5586795337379,40.4470140227413,47.0274163437965,54.3152758237695,62.310319609755,70.9939356688005,80.3268865368858,90.2476045579623,100.671252297247,111.489710188169,122.572616899188,133.76953731544,144.913270749,155.824241693684,166.315841938121,176.200521744029,185.296364998143,193.433834430602,200.462343021919,206.256300113772,210.720297247662,213.793139102777,215.45048672306,215.705959212072,214.61063035918,212.250951330612,208.745222313175,204.238817839573,198.898436415561,192.905690487279,186.450375106035,179.72375232004,172.912164839943,166.19125017452,159.720969882672,153.641603357293,148.070787436042,143.101617619838,138.801768484606,135.213543557164,132.354730685592,130.220118537209,128.783522740361,128.000174672671,127.809339501209,128.137049852706,128.898864380908,130.002583661205,131.350876904311,132.84379020528,134.381119421062,135.864638012771,137.200172661567,138.299518052257,139.082178151759,139.476915998131,139.423088863987,138.871741913798,137.786432108862,136.143755743269,133.93355784477,131.158809588572,127.835150350749,123.990103302685,119.66198657104,114.898554931805,109.755418764161,104.294296661481,98.5811649670357,92.6843710898063,86.6727775438495,80.6140002922952,74.5727984624083,68.609663339343,62.7796434095079,57.1314298727015,51.7067142710914,46.539817459927,41.6575777548108,37.0794762943945,32.8179698636193,28.8789958726205,25.2626109552349,21.9637236604404,18.9728827513797,16.2770853909078,13.8605736043598,11.7055924616746,9.79308900401827,8.10333667370643};


int ledPin = 11;    // you can use the digital pin 11 as output reference as it allows PWM. The RC filter needs to be connected after this pin
void setup() {}
void loop() {
int dim=sizeof(data);
for (int k = 0; k < dim; k++){ //throughout the entire signal lenght
analogWrite(ledPin, data[k]);  //use each cell of data to modulate PWM
delay(10); //provide some delay (i.e. 10 --> 10ms). By augmenting the delay time, the analog PPG will be slower
}}
